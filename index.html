<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ny√≠rb√°tori Turbo Dugdos√≥k</title>
    <link rel="stylesheet" href="styles/style.css">

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800&display=swap" rel="stylesheet">
</head>
<body>

    <!-- Header -->
    <header class="main-header">
        <div class="container">
            <!-- A n√©v t√∂rd√∂lve a st√≠lus miatt -->
            <h1>NY√çRB√ÅTORI <br><span class="highlight">TURBO DUGDOS√ìK</span></h1>
            <p>Ny√≠rb√°tor est√©ly√©be dugdossuk a Turb√≥kat</p>
        </div>
    </header>

    <!-- F≈ë tartalom -->
    <main>
        <section class="container">
            <div class="gallery-grid">

                <!-- 1. K√°rtya -->
                <article class="card">
                    <div class="card-image-wrapper">
                        <img src="img.vid/720/mc720.jpg" alt="720 Turbo" data-spec-video="img.vid/720/720.mp4">
                    </div>
                    <div class="card-content">
                        <h2>Mclaren 720s</h2>
                        <div class="card-actions">
                            <a href="#" class="btn specs-btn" data-spec-video="img.vid/720/720.mp4" data-hp="710" data-accel="2.9s" data-top="341 km/h">Specifik√°ci√≥</a>
                        </div>
                    </div>
                </article>

                <!-- 2. K√°rtya -->
                <article class="card">
                    <div class="card-image-wrapper">
                        <img src="img.vid/bmwm3/bmwm3.jpg" alt="BMW M3" data-spec-video="img.vid/bmwm3/bmwm3.mp4">
                    </div>
                    <div class="card-content">
                        <h2>BMW M3</h2>
                        <div class="card-actions">
                            <a href="#" class="btn specs-btn" data-spec-video="img.vid/bmwm3/bmwm3.mp4" data-hp="500" data-accel="3.9s" data-top="290 km/h" data-orientation="landscape">Specifik√°ci√≥</a>
                        </div>
                    </div>
                </article>

                <!-- 3. K√°rtya -->
                <article class="card">
                    <div class="card-image-wrapper">
                        <img src="img.vid/psc992/psc992.jpg" alt="Porsche 992" data-spec-video="img.vid/psc992/psc992.mp4">
                    </div>
                    <div class="card-content">
                        <h2>Porsche 992 GT3 RS</h2>
                        <div class="card-actions">
                            <a href="#" class="btn specs-btn" data-spec-video="img.vid/psc992/psc992.mp4" data-hp="518" data-accel="3.2s" data-top="312 km/h">Specifik√°ci√≥</a>
                        </div>
                    </div>
                </article>

                <!-- 4. K√°rtya -->
                <article class="card">
                    <div class="card-image-wrapper">
                        <img src="img.vid/rs7/rs7.jpg" alt="Audi RS7" data-spec-video="img.vid/rs7/rs7vid.mp4">
                    </div>
                    <div class="card-content">
                        <h2>Audi RS7 Mansory</h2>
                        <div class="card-actions">
                            <a href="#" class="btn specs-btn" data-spec-video="img.vid/rs7/rs7vid.mp4" data-hp="720" data-accel="3.1s" data-top="330 km/h">Specifik√°ci√≥</a>
                        </div>
                    </div>
                </article>

                <!-- 5. K√°rtya -->
                <article class="card">
                    <div class="card-image-wrapper">
                        <img src="img.vid/s63/s63.jpg" alt="Mercedes S63" data-spec-video="img.vid/s63/s63.mp4">
                    </div>
                    <div class="card-content">
                        <h2>Mercedes S63 AMG</h2>
                        <div class="card-actions">
                            <a href="#" class="btn specs-btn" data-spec-video="img.vid/s63/s63.mp4" data-hp="603" data-accel="3.5s" data-top="250 km/h">Specifik√°ci√≥</a>
                        </div>
                    </div>
                </article>

                <!-- 6. K√°rtya -->
                <article class="card">
                    <div class="card-image-wrapper">
                        <img src="img.vid/sf90/sf90.jpg" alt="Ferrari SF90" data-spec-video="img.vid/sf90/sf90.mp4">
                    </div>
                    <div class="card-content">
                        <h2>Ferrari SF90 Stradale</h2>
                        <div class="card-actions">
                            <a href="#" class="btn specs-btn" data-spec-video="img.vid/sf90/sf90.mp4" data-hp="986" data-accel="2.5s" data-top="340 km/h">Specifik√°ci√≥</a>
                        </div>
                    </div>
                </article>

            </div>
        </section>

        <!-- Specs modal (side-by-side) -->
        <div id="specsModal" style="display:none;position:fixed;inset:0;align-items:center;justify-content:center;background:rgba(0,0,0,0.75);z-index:1100;padding:60px 20px;pointer-events:auto;">
            <div id="specsInner" style="background:#070707;color:#fff;border-radius:10px;padding:16px;max-width:900px;width:96%;box-shadow:0 12px 40px rgba(0,0,0,0.7);position:relative;display:flex;gap:22px;align-items:center;max-height:calc(100vh - 140px);overflow:hidden;flex-direction:row;">
                <button id="closeSpecs" style="position:absolute;right:12px;top:12px;background:#fff;color:#000;border-radius:50%;width:36px;height:36px;border:0;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,0.4);">‚úï</button>
                <button id="rotateSpecs" title="Rotate video" style="position:absolute;right:60px;top:12px;background:transparent;color:#fff;border-radius:50%;width:36px;height:36px;border:1px solid rgba(255,255,255,0.08);cursor:pointer;display:flex;align-items:center;justify-content:center;">‚§æ</button>

                <!-- Video wrapper (id used to toggle layout) -->
                <div id="specsMediaWrap" style="flex:0 0 68%;display:flex;align-items:center;justify-content:center;height:calc(100vh - 220px);">
                    <video id="specsVideo" playsinline muted loop style="width:100%;height:100%;background:#000;border-radius:10px;object-fit:cover;box-shadow:0 10px 30px rgba(0,0,0,0.6);transform:rotate(0deg);transition:transform 200ms ease;max-width:100%;max-height:100%;"></video>
                </div>

                <!-- Text wrapper (id used to toggle layout) -->
                <div id="specsTextWrap" style="flex:0 0 32%;min-width:220px;max-width:320px;padding-left:16px;border-left:1px solid rgba(255,255,255,0.06);display:flex;flex-direction:column;gap:12px;overflow:hidden;">
                    <h3 id="specsTitle" style="margin:0;font-size:1.25rem;font-weight:800;color:#fff"></h3>
                    <div id="specsList" style="font-size:0.98rem;line-height:1.6;color:#e6e6e6;">
                        <!-- Filled by JS -->
                    </div>
                    <div style="margin-top:auto;font-size:0.85rem;color:#a8a8a8;">Bez√°r√°shoz kattints az X-re vagy a h√°tt√©rre.</div>
                </div>
            </div>
        </div>

        <script>
            (function(){
                const body = document.body;
                const specsModal = document.getElementById('specsModal');
                const specsInner = document.getElementById('specsInner');
                const specsMediaWrap = document.getElementById('specsMediaWrap');
                const specsTextWrap = document.getElementById('specsTextWrap');
                const specsTitle = document.getElementById('specsTitle');
                const specsList = document.getElementById('specsList');
                const specsVideo = document.getElementById('specsVideo');
                const closeSpecs = document.getElementById('closeSpecs');
                const rotateSpecs = document.getElementById('rotateSpecs');
                let _rotation = 0; // degrees

                function applyLandscapeLayout(){
                    // video on top, specs below ‚Äî wider, less tall hero
                    specsInner.style.flexDirection = 'column';
                    // make modal wider but capped and reduce overall height so page shows above/below
                    specsInner.style.maxWidth = '1100px';
                    specsInner.style.width = '85%';
                    specsInner.style.maxHeight = '70vh';
                    specsInner.style.overflow = 'hidden';

                    // media: use landscape aspect and limit height so it doesn't dominate
                    specsMediaWrap.style.flex = '0 0 auto';
                    specsMediaWrap.style.height = 'auto';
                    specsVideo.style.width = '100%';
                    specsVideo.style.height = 'auto';
                    specsVideo.style.aspectRatio = '16/9';
                    specsVideo.style.maxHeight = '60vh';

                    specsTextWrap.style.flex = '0 0 100%';
                    specsTextWrap.style.minWidth = '0';
                    specsTextWrap.style.paddingLeft = '0';
                    specsTextWrap.style.borderLeft = 'none';
                    specsTextWrap.style.borderTop = '1px solid rgba(255,255,255,0.06)';
                    specsTextWrap.style.paddingTop = '14px';
                }

                function applyPortraitLayout(){
                    // video left, specs right
                    specsInner.style.flexDirection = 'row';
                    // reset modal sizing to default portrait-friendly values
                    specsInner.style.maxWidth = '900px';
                    specsInner.style.width = '96%';
                    specsInner.style.maxHeight = 'calc(100vh - 140px)';
                    specsInner.style.overflow = 'hidden';

                    specsMediaWrap.style.flex = '0 0 68%';
                    specsMediaWrap.style.height = 'calc(100vh - 220px)';
                    specsVideo.style.width = '100%';
                    specsVideo.style.height = '100%';
                    specsVideo.style.aspectRatio = '';
                    specsVideo.style.maxHeight = '';

                    specsTextWrap.style.flex = '0 0 32%';
                    specsTextWrap.style.minWidth = '220px';
                    specsTextWrap.style.paddingLeft = '16px';
                    specsTextWrap.style.borderLeft = '1px solid rgba(255,255,255,0.06)';
                    specsTextWrap.style.borderTop = 'none';
                    specsTextWrap.style.paddingTop = '0';
                }

                function openSpecs(btn){
                    const card = btn.closest('.card');
                    const title = card.querySelector('h2').innerText;
                    const hp = btn.dataset.hp || '-';
                    const accel = btn.dataset.accel || '-';
                    const top = btn.dataset.top || '-';
                    const video = btn.dataset.specVideo || '';
                    const forcedOrientation = (btn.dataset.orientation || '').toLowerCase();

                    specsTitle.textContent = title;
                    specsList.innerHTML = `
                        <div style="margin-bottom:8px;color:#ffddcc">üî• Teljes√≠tm√©ny: <strong style=\"color:#fff\">${hp} LE</strong></div>
                        <div style="margin-bottom:8px;color:#cfe8ff">‚ö° 0-100 km/h: <strong style=\"color:#fff\">${accel}</strong></div>
                        <div style="margin-bottom:8px;color:#d6ffd6">üèÅ V√©gsebess√©g: <strong style=\"color:#fff\">${top}</strong></div>
                    `;

                    // sensible default while loading
                    applyPortraitLayout();

                    // clean up any previous handlers/timeouts
                    if(window._specsMetaHandler){
                        specsVideo.removeEventListener('loadedmetadata', window._specsMetaHandler);
                        window._specsMetaHandler = null;
                    }
                    if(window._specsFallback) { clearTimeout(window._specsFallback); window._specsFallback = null; }

                    if(video){
                        // set src then wait for metadata to determine orientation (unless forced)
                        specsVideo.src = video;
                        specsVideo.currentTime = 0;
                        specsVideo.muted = true;

                        if(forcedOrientation === 'landscape'){
                            // force landscape layout (video on top)
                            applyLandscapeLayout();
                            specsVideo.play().catch(()=>{});
                        } else if(forcedOrientation === 'portrait'){
                            applyPortraitLayout();
                            specsVideo.play().catch(()=>{});
                        } else {
                            // Use loadedmetadata event to inspect intrinsic video dimensions
                            window._specsMetaHandler = function(){
                                const w = specsVideo.videoWidth || 0;
                                const h = specsVideo.videoHeight || 0;
                                if(w > h){
                                    applyLandscapeLayout();
                                } else {
                                    applyPortraitLayout();
                                }
                                specsVideo.play().catch(()=>{});
                                // cleanup
                                specsVideo.removeEventListener('loadedmetadata', window._specsMetaHandler);
                                window._specsMetaHandler = null;
                                if(window._specsFallback){ clearTimeout(window._specsFallback); window._specsFallback = null; }
                            };
                            specsVideo.addEventListener('loadedmetadata', window._specsMetaHandler);

                            // fallback if metadata doesn't arrive quickly
                            window._specsFallback = setTimeout(function(){
                                if(!specsVideo.videoWidth || !specsVideo.videoHeight){
                                    applyPortraitLayout();
                                }
                                window._specsFallback = null;
                            }, 300);
                        }
                    } else {
                        applyPortraitLayout();
                    }

                    // prevent body scrollbar while modal is open
                    body.style.overflow = 'hidden';
                    specsModal.style.display = 'flex';
                }

                function closeSpecsModal(){
                    specsVideo.pause(); specsVideo.src = '';
                    // reset rotation
                    _rotation = 0; specsVideo.style.transform = 'rotate(0deg)'; specsVideo.style.objectFit = 'cover';
                    if(window._specsMetaHandler){ specsVideo.removeEventListener('loadedmetadata', window._specsMetaHandler); window._specsMetaHandler = null; }
                    if(window._specsFallback){ clearTimeout(window._specsFallback); window._specsFallback = null; }
                    specsModal.style.display = 'none';
                    body.style.overflow = '';
                    // reset layout defaults
                    applyPortraitLayout();
                }

                // rotate handler: rotates 90deg steps and adjusts fit
                rotateSpecs.addEventListener('click', function(e){
                    e.stopPropagation();
                    _rotation = (_rotation + 90) % 360;
                    specsVideo.style.transform = 'rotate(' + _rotation + 'deg)';
                    // if rotated by 90 or 270, fit by height to avoid overflow
                    if(_rotation % 180 !== 0){
                        specsVideo.style.objectFit = 'contain';
                        specsVideo.style.width = 'auto';
                        specsVideo.style.height = '100%';
                    } else {
                        specsVideo.style.objectFit = 'cover';
                        specsVideo.style.width = '100%';
                        specsVideo.style.height = '100%';
                    }
                });

                // Attach handlers
                document.querySelectorAll('.specs-btn').forEach(btn => {
                    btn.addEventListener('click', function(e){ e.preventDefault(); openSpecs(this); });
                });

                closeSpecs.addEventListener('click', closeSpecsModal);
                specsModal.addEventListener('click', function(e){ if(e.target === specsModal) closeSpecsModal(); });
                window.addEventListener('blur', function(){ if(!specsVideo.paused) specsVideo.pause(); });
            })();
        </script>
    </main>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="container">
            <p class="brand">NY√çRB√ÅTORI TURBO DUGDOS√ìK &copy; 2025</p>
            <div class="divider"></div>
            <p class="creators">Projekt k√©sz√≠t≈ëk:<br> <span>Retkes Iv√°n &bull; P√°csa Alex &bull; Kov√°cs D√°vid</span></p>
        </div>
    </footer>

</body>
</html>